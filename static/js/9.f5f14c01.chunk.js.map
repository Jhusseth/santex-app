{"version":3,"sources":["components/orders/Bill.js","components/orders/BillOrders.js","pages/Orders.js"],"names":["Bill","props","useState","totalValue","setTotalValue","products","setProducts","useEffect","calculateTotal","total","forEach","product","price","a","publicFetch","post","order","data","fetchProducts","className","map","key","_id","name","numberOrder","state","BillOrders","isAdmin","showModal","setShowModal","handleClick","id","put","status","Swal","fire","position","icon","title","message","showConfirmButton","timer","setTimeout","window","location","reload","onClick","DropdownRender","Order","useAuth","authState","orders","setOrder","get","userInfo","identification","fetchOrders","fetchOrdersCl","GradientBar","Card","od"],"mappings":"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","file":"static/js/9.f5f14c01.chunk.js","sourcesContent":["import React, {useState, useEffect } from 'react'\nimport { publicFetch } from \"../../util/fetch\";\n\nexport default function Bill(props) {\n\n    const [totalValue, setTotalValue] = useState(0);\n    const [products, setProducts] = useState([]);\n\n    useEffect(() => {\n\n        const calculateTotal = (products) => {\n            let total = 0;\n            products.forEach((product) => (total += product.price));\n            setTotalValue(total);\n        };\n\n        async function fetchProducts() {\n            const { data } = await publicFetch.post(`products/order`, props.order.products);\n            setProducts(data.products);\n            calculateTotal(data.products);\n        }\n  \n        fetchProducts()\n\n    }, []);\n\n\n    return (\n        <>\n            <div className=\"w-full\">\n                <div className=\"bg-white\">\n                    <div className=\"max-w-md mx-auto rounded-lg overflow-hidden md:max-w-xl\">\n                        <div className=\"flex\">\n                            <div className=\"w-full p-3\">\n                                <div className=\"border border-black rounded-lg border-dashed bg-dark shadow-2xl\">\n                                    <div className=\"p-3\">\n                                        <h5 className=\"text-black font-serif\">You have to pay</h5>\n                                        <div className=\"flex flex-row items-end\"> <span className=\"text-black text-3xl font-bold font-nucleo\">{totalValue}</span> <span className=\"mt-2 text-gray-800 font-bolder font-serif\">COP</span> </div>\n                                    </div>\n                                    <div className=\"flex w-full mt-3 mb-3\"> <span className=\"border border-dashed w-full border-black\"></span> </div>\n                                    <div className=\"p-3 space-y-5\">\n                                        <div className=\"flex flex-col mb-3\"> <span className=\"text-gray-900 font-serif\">Products</span>{products.map(product =>(<span className=\"text-black text-md font-bold font-nucleo\" key={product._id}><span>{product._id}</span> <span className=\"float-right\">{product.name}</span> </span>))}</div>\n                                        <div className=\"flex flex-col mb-3\"> <span className=\"text-gray-900 font-serif\">Company</span> <span className=\"text-black text-md font-bold font-nucleo\">Sant√©x</span> </div>\n                                        <div className=\"flex flex-col mb-3\"> <span className=\"text-gray-900 font-serif\">Order #</span> <span className=\"text-black text-md font-bold font-nucleo\">{props.order.numberOrder}</span> </div>\n                                        <div className=\"flex flex-col\"> <span className=\"text-gray-900 font-serif\">Service</span> <span className=\"text-black text-md font-bold font-nucleo\">{props.order.state}</span> </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </>\n    )\n}\n","import React, {useState} from \"react\";\nimport { publicFetch } from \"../../util/fetch\";\n\nimport Swal from 'sweetalert2'\nimport Bill from './Bill'\nconst BillOrders = ({order, isAdmin}) => {\n\n    const [showModal, setShowModal] = useState(false);\n\n    \n\n    const handleClick = async (id, state) => {\n        const { data , status } = await publicFetch.put(`admins/orders/${id}`, state)\n        if(status === 200){\n            Swal.fire({\n                position: 'top-center',\n                icon: 'success',\n                title: data.message,\n                showConfirmButton: false,\n                timer: 1400\n            })\n            setTimeout(() => {\n                window.location.reload()\n            }, 1500);\n        }\n        else {\n            Swal.fire({\n                position: 'top-center',\n                icon: 'error',\n                title: data.message,\n                showConfirmButton: false,\n                timer: 1300\n            })\n            setTimeout(() => {\n                window.location.reload()\n            }, 1300);\n        }\n        \n    }\n\n    const handleClickinfo = () => {\n        setShowModal(!showModal)\n    }\n\n    return (\n        <>\n        <div className=\"flex w-full\">\n            <div className=\"w-full\">\n                <div className=\"relative align-middle w-full flex flex-col\">\n                    <div\n                    className={\n                        \"text-white font-bold uppercase text-sm px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150 bg-gradient\"\n                    }\n                    onClick={handleClickinfo}\n                    >\n                        <div className=\"flex justify-between items-center text-md font-nucleo\">\n                            <div>\n                                {order.numberOrder}\n                            </div>\n                        \n                        <div className=\"flex flex-row ml-auto items-center\">\n                            <div className=\"ml-auto justify-center \">\n                                {order.state}\n                            </div>\n                            {isAdmin?<> \n                            <div className=\"mr-3 ml-3\">\n                                <button className=\"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded\" onClick={()=>handleClick(order._id, {state:\"Confirmed\"})}>\n                                    Accept\n                                </button>\n                            </div>\n                            <div>\n                                <button className=\"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded\" onClick={()=>handleClick(order._id,{state:\"Declined\"})}>\n                                    Decline\n                                </button>\n                            </div></>:null}\n                        </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        {showModal? <Bill order={order} /> : null}\n        </>\n    );\n};\n\nexport default function DropdownRender({order, isAdmin, }) {\n  return (\n    <>\n      <BillOrders order={order} isAdmin={isAdmin}/>\n    </>\n  );\n}","import React, { useState, useEffect } from \"react\";\nimport Card from \"../components/common/Card\";\nimport GradientBar from \"../components/common/GradientBar\";\nimport { useAuth } from \"../context/AuthContext\";\nimport { publicFetch } from \"../util/fetch\";\nimport BillOrder from '../components/orders/BillOrders'\n\nexport default function Order() {\n  const {isAdmin, authState } = useAuth();\n  const [orders, setOrder] = useState([]);\n\n  useEffect(() => {\n\n    async function fetchOrders() {\n      const { data } = await publicFetch.get(`admins/orders`);\n      setOrder(data.orders);\n    }\n\n    async function fetchOrdersCl() {\n      const { data } = await publicFetch.get(`clients/orders/${authState.userInfo.identification}`);\n      setOrder(data.orders);\n    }\n    if(isAdmin()){\n      fetchOrders();\n    }\n    else{\n      fetchOrdersCl()\n    }\n  }, []);\n\n  return (\n    <>\n      <div className=\"sm:w-3/4 h-auto m-auto sm:pt-3 shadow-xl\">\n        <div className=\"mt-10\">\n        <GradientBar />\n          <Card>\n            <h1 className=\"text-2xl font-nucleo\">Orders</h1>\n            <div className=\"flex items-center mt-5 sm:mt-10\">\n              <div className=\"flex flex-col w-full\">\n                { orders.map((od) => (\n                    <BillOrder key={od._id} order={od} isAdmin={isAdmin()}/>\n                ))}\n              </div>\n            </div>\n          </Card>\n        </div>\n      </div>\n    </>\n  );\n}\n"],"sourceRoot":""}