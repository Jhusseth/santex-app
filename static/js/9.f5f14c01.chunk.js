(this.webpackJsonpuser_manager_app=this.webpackJsonpuser_manager_app||[]).push([[9],{162:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return v}));var n=a(46),r=a.n(n),l=a(68),c=a(7),s=a(0),o=a.n(s),m=a(31),i=a(35),u=a(8),d=a(69),f=a(140),p=a.n(f);function x(e){var t=Object(s.useState)(0),a=Object(c.a)(t,2),n=a[0],m=a[1],i=Object(s.useState)([]),u=Object(c.a)(i,2),f=u[0],p=u[1];return Object(s.useEffect)((function(){var t=function(e){var t=0;e.forEach((function(e){return t+=e.price})),m(t)};function a(){return(a=Object(l.a)(r.a.mark((function a(){var n,l;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,d.a.post("products/order",e.order.products);case 2:n=a.sent,l=n.data,p(l.products),t(l.products);case 6:case"end":return a.stop()}}),a)})))).apply(this,arguments)}!function(){a.apply(this,arguments)}()}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"w-full"},o.a.createElement("div",{className:"bg-white"},o.a.createElement("div",{className:"max-w-md mx-auto rounded-lg overflow-hidden md:max-w-xl"},o.a.createElement("div",{className:"flex"},o.a.createElement("div",{className:"w-full p-3"},o.a.createElement("div",{className:"border border-black rounded-lg border-dashed bg-dark shadow-2xl"},o.a.createElement("div",{className:"p-3"},o.a.createElement("h5",{className:"text-black font-serif"},"You have to pay"),o.a.createElement("div",{className:"flex flex-row items-end"}," ",o.a.createElement("span",{className:"text-black text-3xl font-bold font-nucleo"},n)," ",o.a.createElement("span",{className:"mt-2 text-gray-800 font-bolder font-serif"},"COP")," ")),o.a.createElement("div",{className:"flex w-full mt-3 mb-3"}," ",o.a.createElement("span",{className:"border border-dashed w-full border-black"})," "),o.a.createElement("div",{className:"p-3 space-y-5"},o.a.createElement("div",{className:"flex flex-col mb-3"}," ",o.a.createElement("span",{className:"text-gray-900 font-serif"},"Products"),f.map((function(e){return o.a.createElement("span",{className:"text-black text-md font-bold font-nucleo",key:e._id},o.a.createElement("span",null,e._id)," ",o.a.createElement("span",{className:"float-right"},e.name)," ")}))),o.a.createElement("div",{className:"flex flex-col mb-3"}," ",o.a.createElement("span",{className:"text-gray-900 font-serif"},"Company")," ",o.a.createElement("span",{className:"text-black text-md font-bold font-nucleo"},"Sant\xe9x")," "),o.a.createElement("div",{className:"flex flex-col mb-3"}," ",o.a.createElement("span",{className:"text-gray-900 font-serif"},"Order #")," ",o.a.createElement("span",{className:"text-black text-md font-bold font-nucleo"},e.order.numberOrder)," "),o.a.createElement("div",{className:"flex flex-col"}," ",o.a.createElement("span",{className:"text-gray-900 font-serif"},"Service")," ",o.a.createElement("span",{className:"text-black text-md font-bold font-nucleo"},e.order.state)," ")))))))))}var E=function(e){var t=e.order,a=e.isAdmin,n=Object(s.useState)(!1),m=Object(c.a)(n,2),i=m[0],u=m[1],f=function(){var e=Object(l.a)(r.a.mark((function e(t,a){var n,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.put("admins/orders/".concat(t),a);case 2:n=e.sent,l=n.data,200===n.status?(p.a.fire({position:"top-center",icon:"success",title:l.message,showConfirmButton:!1,timer:1400}),setTimeout((function(){window.location.reload()}),1500)):(p.a.fire({position:"top-center",icon:"error",title:l.message,showConfirmButton:!1,timer:1300}),setTimeout((function(){window.location.reload()}),1300));case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"flex w-full"},o.a.createElement("div",{className:"w-full"},o.a.createElement("div",{className:"relative align-middle w-full flex flex-col"},o.a.createElement("div",{className:"text-white font-bold uppercase text-sm px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150 bg-gradient",onClick:function(){u(!i)}},o.a.createElement("div",{className:"flex justify-between items-center text-md font-nucleo"},o.a.createElement("div",null,t.numberOrder),o.a.createElement("div",{className:"flex flex-row ml-auto items-center"},o.a.createElement("div",{className:"ml-auto justify-center "},t.state),a?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"mr-3 ml-3"},o.a.createElement("button",{className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",onClick:function(){return f(t._id,{state:"Confirmed"})}},"Accept")),o.a.createElement("div",null,o.a.createElement("button",{className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded",onClick:function(){return f(t._id,{state:"Declined"})}},"Decline"))):null)))))),i?o.a.createElement(x,{order:t}):null)};function b(e){var t=e.order,a=e.isAdmin;return o.a.createElement(o.a.Fragment,null,o.a.createElement(E,{order:t,isAdmin:a}))}function v(){var e=Object(u.c)(),t=e.isAdmin,a=e.authState,n=Object(s.useState)([]),f=Object(c.a)(n,2),p=f[0],x=f[1];return Object(s.useEffect)((function(){function e(){return(e=Object(l.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("admins/orders");case 2:t=e.sent,a=t.data,x(a.orders);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(){return(n=Object(l.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("clients/orders/".concat(a.userInfo.identification));case 2:t=e.sent,n=t.data,x(n.orders);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t()?function(){e.apply(this,arguments)}():function(){n.apply(this,arguments)}()}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"sm:w-3/4 h-auto m-auto sm:pt-3 shadow-xl"},o.a.createElement("div",{className:"mt-10"},o.a.createElement(i.a,null),o.a.createElement(m.a,null,o.a.createElement("h1",{className:"text-2xl font-nucleo"},"Orders"),o.a.createElement("div",{className:"flex items-center mt-5 sm:mt-10"},o.a.createElement("div",{className:"flex flex-col w-full"},p.map((function(e){return o.a.createElement(b,{key:e._id,order:e,isAdmin:t()})}))))))))}}}]);
//# sourceMappingURL=9.f5f14c01.chunk.js.map